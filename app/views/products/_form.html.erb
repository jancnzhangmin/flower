<script>
    $(document).ready(function () {
        $('#validation-form').validate({
            errorElement: 'div',
            errorClass: 'help-block',
            focusInvalid: false,
            rules: {
                'product[manufacturer_id]': {
                    required: true
                },
                'product[name]': {
                    required: true
                },
                'product[cost]': {
                    required: true
                },
                'product[price]': {
                    required: true
                }
            },

            messages: {
                'product[manufacturer_id]': {
                    required: "&nbsp;&nbsp;请选择厂商"
                },
                'product[name]': {
                    required: "&nbsp;&nbsp;产品名称不能为空"
                },
                'product[cost]': {
                    required: "&nbsp;&nbsp;成本不能为空"
                },
                'product[price]': {
                    required: "&nbsp;&nbsp;售价不能为空"
                }
            },

            invalidHandler: function (event, validator) { //display error alert on form submit
                $('.alert-danger', $('.login-form')).show();
            },

            highlight: function (e) {
                $(e).closest('.form-group').removeClass('has-info').addClass('has-error');
            },

            success: function (e) {
                $(e).closest('.form-group').removeClass('has-error').addClass('has-info');
                $(e).remove();
            }




        });
    });
</script>
<div class="alert alert-block alert-success" style="display:none;">
  <button type="button" class="close" data-dismiss="alert">
    <i class="icon-remove"></i>
  </button>

  <p>
    <strong>
      <i class="icon-ok"></i>
    </strong>
    保存成功
  </p>

</div>

<%= form_with(model:product,local:true,id:'validation-form',:html => {:class=>'form-horizontal m-t',:multipart => true}) do |f| %>
  <h3 class="header smaller lighter blue">
    产品
    <small></small>
  </h3>
  <div class="form-group">
    <label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 厂商 </label>
    <div class="col-sm-10">
      <%= f.select :manufacturer_id,Manufacturer.all.map{|p| [p.name,p.id]},{include_blank:'请选择厂商'},class:"col-xs-10 col-sm-8" %>
    </div>
  </div>
  <div class="form-group">
    <label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 产品名称 </label>
    <div class="col-sm-10">
      <%= f.text_field :name,class:"col-xs-10 col-sm-8" %>
    </div>
  </div>

  <div class="form-group">
    <label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 产品描述 </label>
    <div class="col-sm-10">
      <%= f.text_field :subtitle,class:"col-xs-10 col-sm-8" %>
    </div>
  </div>

  <div class="form-group">
    <label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 成本 </label>
    <div class="col-sm-10">
      <%= f.text_field :cost,class:"col-xs-10 col-sm-8" %>
    </div>
  </div>
  <div class="form-group">
    <label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 售价 </label>
    <div class="col-sm-10">
      <%= f.text_field :price,class:"col-xs-10 col-sm-8" %>
    </div>
  </div>
  <div class="form-group">
    <label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 单位 </label>
    <div class="col-sm-10">
      <%= f.text_field :unit,class:"col-xs-10 col-sm-8" %>
    </div>
  </div>
  <div class="form-group">
    <label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 规格 </label>
    <div class="col-sm-10">
      <%= f.text_field :spec,class:"col-xs-10 col-sm-8" %>
    </div>
  </div>
  <div class="form-group">
    <label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 净含量 </label>
    <div class="col-sm-10">
      <%= f.text_field :weight,class:"col-xs-10 col-sm-8" %>
    </div>
  </div>
  <div class="form-group">
    <label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 品牌 </label>
    <div class="col-sm-10">
      <%= f.text_field :brand,class:"col-xs-10 col-sm-8" %>
    </div>
  </div>
  <div class="form-group">
    <label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 保质期 </label>
    <div class="col-sm-10">
      <%= f.text_field :shelflife,class:"col-xs-10 col-sm-8" %>
    </div>
  </div>
  <div class="form-group">
    <label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 上架 </label>
    <div class="col-sm-10">

      <div class="col-xs-3">
        <label>
          <%= f.check_box :grounding,class:"ace ace-switch" %>
          <span class="lbl"></span>
        </label>
      </div>

    </div>
  </div>
  <div class="form-group">
    <label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 试用装 </label>
    <div class="col-sm-10">

      <div class="col-xs-3">
        <label>
          <%= f.check_box :trial,class:"ace ace-switch" %>
          <span class="lbl"></span>
        </label>
      </div>

    </div>
  </div>
  <div class="form-group">
    <label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 计入任务 </label>
    <div class="col-sm-10">

      <div class="col-xs-3">
        <label>
          <%= f.check_box :intask,class:"ace ace-switch" %>
          <span class="lbl"></span>
        </label>
      </div>

    </div>
  </div>
  <div class="form-group">
    <label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 产品详情 </label>
    <div class="col-sm-10">
      <div class="col-xs-10 col-sm-8" style="padding-left:0px;padding-right:0px;">
        <%= f.kindeditor :content %>
      </div>
    </div>
  </div>

  <div class="clearfix form-actions">
    <div class="col-md-offset-2 col-md-10">
      <button type="submit" name="commit" value="保存" class="btn btn-info" data-disable-with="保存" id="submit">
        <i class="icon-ok bigger-110"></i>
        保存
      </button>

    </div>
  </div>
<% end %>

